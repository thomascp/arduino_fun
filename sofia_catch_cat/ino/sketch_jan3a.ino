
#include "NNZXM.h"
#include "input.h"
#include "screen.h"
#include "common.h"

const uint16_t PROGMEM cat[] = {
0xf6d6,
0xf6b5,
0xff18,
0xff18,
0xff39,
0x6a03,
0xff59,
0xff59,
0xff59,
0xd572,
0x5a26,
0xa490,
0xf6d7,
0x838c,
0xf6b6,
0xff5a,
0xff5a,
0xf739,
0xeeb7,
0xe590,
0xf6b5,
0xf6b5,
0xff38,
0xff38,
0xff59,
0x7ac7,
0x7b09,
0xff18,
0xff59,
0x49a4,
0x49c5,
0x6aca,
0x93ac,
0xc5b5,
0xbd53,
0xeed8,
0xf739,
0xf719,
0xee96,
0xdd6e,
0xf6b5,
0xf6d6,
0xff38,
0xff39,
0xff39,
0x7285,
0xc510,
0x8b49,
0x938a,
0x3123,
0x41c5,
0x62eb,
0x9c91,
0x9c70,
0xb512,
0x8bee,
0xde77,
0xf719,
0xee75,
0xdd2d,
0xf694,
0xf694,
0xff17,
0xff38,
0xff39,
0x5981,
0x9369,
0x59e3,
0x5a25,
0x49a4,
0x4a07,
0x6a88,
0x9cb2,
0xb4f1,
0x8bad,
0x838c,
0x940f,
0xeeb8,
0xe5f1,
0xe56d,
0xf652,
0xee10,
0xf6b5,
0xff18,
0xf6b6,
0x5181,
0xbc6c,
0x9bab,
0x7b09,
0x51e5,
0x28e2,
0x72a8,
0xbdb6,
0xacb0,
0x8c51,
0x6a87,
0x7b2a,
0xddd3,
0xe5af,
0xe58d,
0xedef,
0xedad,
0xf610,
0xf6f7,
0xc4ef,
0x7223,
0xb44c,
0xac0b,
0xa42d,
0x6246,
0x3943,
0x6aea,
0xde77,
0xbd32,
0xa535,
0x49a4,
0x732b,
0xe5d2,
0xed8c,
0xedce,
0xed8b,
0xe56a,
0xedad,
0xf652,
0x6a65,
0x6a02,
0xb42a,
0x8b07,
0x7ac7,
0x72a7,
0x4184,
0x9c70,
0xacf2,
0xbd11,
0xadb8,
0x5227,
0x83ad,
0xdd90,
0xed8c,
0xed8c,
0xe56a,
0xe52a,
0xed6b,
0xedee,
0x59e4,
0x6a03,
0x82a5,
0x61e3,
0x61e3,
0x2060,
0xa46f,
0x8bcd,
0xb513,
0xa46f,
0xad35,
0x7bcf,
0x7b6c,
0xcd72,
0xed8c,
0xed8d,
0xdd09,
0xdce9,
0xcc88,
0xdcc9,
0x4962,
0x6203,
0x7223,
0x7264,
0x5981,
0x7a85,
0xc532,
0xacaf,
0xbcf0,
0xac6e,
0xacd2,
0xad35,
0x62a9,
0xc531,
0xed8c,
0xe58c,
0xdce9,
0xcc68,
0xa345,
0xab86,
0x4961,
0x61a1,
0x820,
0x4163,
0x82c6,
0x61e3,
0x9c4f,
0x820,
0x49a4,
0x93ac,
0xac90,
0xbd96,
0x6b0a,
0xcd72,
0xed8d,
0xedad,
0xd4c8,
0xcc47,
0x8263,
0x7244,
0x4121,
0x61c1,
0x7244,
0x4142,
0x28a1,
0x7244,
0xef3b,
0x1860,
0xbcef,
0xcd72,
0xac8f,
0x9cb2,
0x730b,
0xcd72,
0xedee,
0xedee,
0xcc68,
0xbc07,
0x7222,
0x61c2,
0x4941,
0x61c1,
0x7223,
0x5161,
0x28a1,
0x92e6,
0xd637,
0xc4cd,
0xa3eb,
0xd5f5,
0xa44e,
0xa4b1,
0x83ac,
0xddd3,
0xf610,
0xf610,
0xc447,
0xb3c6,
0x69e1,
0x59a2,
0x59c3,
0x61c1,
0xa388,
0x9b88,
0x4942,
0x8263,
0x93ed,
0x6204,
0xcdb4,
0xde77,
0xbd32,
0xa4b1,
0x736d,
0xee12,
0xf630,
0xedf0,
0xcc47,
0xb3c6,
0x5981,
0x4941,
0x59c3,
0x9305,
0x8aa4,
0x7223,
0x8b07,
0x92e5,
0x6a46,
0xb48e,
0xd617,
0xbccf,
0xc574,
0xa490,
0x83ad,
0xf652,
0xf631,
0xf610,
0xc407,
0xab85,
0x5181,
0x51a2,
0x61e3,
0x59a1,
0x92e5,
0x9b26,
0x30a0,
0x8263,
0xee55,
0x49c4,
0xa42d,
0xbd11,
0xacf2,
0xa4b1,
0xa470,
0xee32,
0xf631,
0xee10,
0xbbe7,
0xa325,
0x4921,
0x4982,
0x6203,
0x9baa,
0x69e1,
0x69e2,
0x8263,
0xa3cb,
0xd658,
0xb4d0,
0xc595,
0xb532,
0xa470,
0xacf2,
0xb512,
0xf630,
0xedf0,
0xee10,
0xb3c6,
0x8a83,
0x4101,
0x4941,
0x59a2,
0x59c3,
0x82a5,
0x9347,
0xb3c9,
0x4141,
0xce18,
0xef5c,
0x9c0d,
0xbd53,
0xc5d6,
0xacf2,
0xc573,
0xedcf,
0xedef,
0xee10,
0xbbc6,
0x7201,
0x4101,
0x4121,
0x4941,
0x5181,
0x9348,
0x7a84,
0xb409,
0xb44c,
0xdedc,
0xac6f,
0xad13,
0x736d,
0xc595,
0xc5b6,
0xddf4,
0xe58f,
0xe5af,
0xedd0,
0x9b24,
0x61a1,
0x38e0,
0x38c0,
0x51a2,
0x4961,
0x59a2,
0x59c2,
0x59a1,
0xb4af,
0x72c8,
0x8bcd,
0x6b4d,
0x4184,
0xc595,
0xa491,
0xd592,
0xdd6e,
0xe5af,
0xe5af,
0x92c4,
0x5981,
0x38e1,
0x4121,
0x4100,
0x1840,
0x4121,
0x59c3,
0x6204,
0x6224,
0x6267,
0x5206,
0x6288,
0x5a68,
0xc595,
0xa4b1,
0xcd2f,
0xe58f,
0xe5af,
0xe5cf,
};

const uint16_t PROGMEM niannian[] = {
0xef3a,
0xef3a,
0xef5a,
0xef3a,
0xef5b,
0xf77b,
0xef7b,
0xf77b,
0xf77b,
0xf77b,
0xf77b,
0xf77b,
0xef7b,
0xef7c,
0xf77b,
0xef7b,
0xf77b,
0xef7b,
0xef7b,
0xef7b,
0xef3a,
0xef3a,
0xef5a,
0xe75a,
0xef5a,
0xef7b,
0xef5a,
0xef5b,
0xef5a,
0xef3a,
0xef5b,
0xe73a,
0xef5b,
0xef5b,
0xf77c,
0xef7b,
0xf79b,
0xf77b,
0xef7b,
0xf79b,
0xef5b,
0xef5b,
0xef5b,
0xef5b,
0xef5a,
0xef5b,
0xe73a,
0x5aa9,
0x31a6,
0x3185,
0x39c7,
0x39c6,
0x4207,
0x7bad,
0xef5b,
0xef7b,
0xf77c,
0xef7c,
0xf77b,
0xf79c,
0xef5b,
0xef5b,
0xef5b,
0xef5b,
0xe73a,
0x7bad,
0x39e6,
0x2944,
0x2103,
0x20e3,
0x20e3,
0x20e3,
0x2944,
0x39a6,
0x4207,
0xef3b,
0xf77c,
0xf77c,
0xf79c,
0xf79c,
0xef5b,
0xef5b,
0xef3b,
0xe71a,
0x62ea,
0x2944,
0x2924,
0x20e3,
0x20e3,
0x3144,
0x49c5,
0x51e5,
0x1882,
0x2103,
0x3165,
0x4a48,
0xef5b,
0xef7c,
0xf79c,
0xf7bc,
0xe719,
0xe6f9,
0xdeb8,
0x9cb1,
0x2965,
0x2923,
0x3123,
0x7aa7,
0x6226,
0x7266,
0x934a,
0x9bcc,
0x49a5,
0x3164,
0x3144,
0x39c6,
0x52a9,
0xef7b,
0xef9c,
0xf7bc,
0xde96,
0xd656,
0xc5d4,
0x3185,
0x41a5,
0x6226,
0x7aa7,
0x9349,
0x61e4,
0xa3ab,
0xa3ab,
0x936a,
0x72c8,
0x6288,
0x942e,
0x41c6,
0x5289,
0x83ee,
0xef7c,
0xf7bd,
0xd635,
0xc5f4,
0x7b6c,
0x2903,
0x6a67,
0x6a67,
0x6a66,
0x938a,
0xa3cb,
0xb42d,
0xbc6e,
0xc4f0,
0xa40d,
0xac8f,
0xbd53,
0xbd32,
0x6aca,
0x630b,
0xef7b,
0xf7bd,
0xcdf4,
0xbd92,
0x6b0a,
0x2103,
0x6a67,
0x72a7,
0x8b49,
0x82e8,
0x8309,
0xa3ab,
0xc4cf,
0xcd52,
0xac2d,
0xac2e,
0xc511,
0xde36,
0xd5f5,
0x39c6,
0xef7c,
0xf7bd,
0xc5d3,
0xb572,
0x41c5,
0x20e3,
0x7ae8,
0x7287,
0x3124,
0x3964,
0x8b29,
0x9349,
0xcd51,
0xc511,
0x82c8,
0x3165,
0xa490,
0xddf5,
0xcdf5,
0x738e,
0xdeda,
0xf79d,
0xc5b3,
0xb531,
0x49e6,
0x28e3,
0x8b4a,
0x8b09,
0x9b8b,
0x9b6b,
0x9b8b,
0x9b6a,
0xdd92,
0xddf5,
0xac0d,
0xa3cc,
0xd5b3,
0xf6b8,
0xff3a,
0x734c,
0xe73b,
0xf7bd,
0xc5b3,
0xb551,
0x8c0d,
0x3123,
0x934a,
0xabcc,
0xabeb,
0xabcb,
0xa38a,
0x9b6a,
0xdd92,
0xf6b7,
0xdd93,
0xd572,
0xdd93,
0xf6b8,
0xf719,
0x8c0f,
0xe6fa,
0xf7bd,
0xc5b3,
0xb552,
0x944f,
0x3964,
0x8b09,
0xabab,
0xbc4d,
0xabcb,
0x82a8,
0x9349,
0xe5b2,
0xf6b8,
0xac0d,
0xc48f,
0xe5d5,
0xfefa,
0xee98,
0xbdb5,
0xdefa,
0xf79d,
0xc5d4,
0xbd73,
0xad12,
0x41e6,
0x7ae9,
0x932a,
0xb42e,
0xa3ab,
0x9329,
0x7287,
0xa3cc,
0xddb4,
0xcd32,
0xa38c,
0xc4d0,
0xe5d5,
0xeefb,
0xbdd6,
0xef5c,
0xf79d,
0xbdb4,
0xb573,
0xad12,
0x83ad,
0x5a67,
0x7ac8,
0x9b8b,
0x7287,
0x82c8,
0x9329,
0xc48f,
0xccf1,
0xcd52,
0x8b2a,
0xcd12,
0xe5d5,
0xbd95,
0xd699,
0xef5c,
0xf79d,
0xb572,
0xb511,
0xacd0,
0x940e,
0x6aea,
0x3944,
0x82e9,
0x8b29,
0x7aa8,
0x8268,
0xa34c,
0xc4b1,
0xddb4,
0xb46e,
0xcd52,
0x8acb,
0xce38,
0xe6da,
0xef7c,
0xf79d,
0xb531,
0xacd0,
0x9c4e,
0x8bcd,
0x72c9,
0x3104,
0x4124,
0x6a47,
0x934a,
0xb40d,
0xbc8f,
0xd572,
0xe636,
0xd593,
0xddb4,
0x4185,
0x6a28,
0xe578,
0x41a6,
0xf77d,
0xa4b0,
0x944e,
0x8bed,
0x59a5,
0x5165,
0x61a7,
0x71e9,
0x61c5,
0x7247,
0x934a,
0xb42e,
0xccf1,
0xcd31,
0xd593,
0xbcaf,
0x6206,
0x51a6,
0xf599,
0x9b0d,
0x930d,
0x942e,
0x61c6,
0x5986,
0x5165,
0x4104,
0x7209,
0x826b,
0x59a5,
0x6a06,
0x8b09,
0xa3cc,
0xb44d,
0xbcaf,
0xb48f,
0x934a,
0x6206,
0x61e7,
0xed77,
0x7a6a,
0xc452,
0x5985,
0x5965,
0x5965,
0x40e4,
0x40e4,
0x824a,
0x7a4a,
0x7a48,
0x8ac8,
0xa3ab,
0xa38b,
0x9329,
0x6a05,
0x30a2,
0x5945,
0x6a06,
0x61a6,
0x8aab,
0x826b,
0xe4d6,
};


NNZXM *game;
screen *scr;
input *in;
character player =
{
  {4, 6, 20, 20}, niannian
};
character NPC = 
{
  {4, 151, 20, 20}, cat
};

struct lines lines[] =
{
    {BORDER_LEFT,   BORDER_UP,    BORDER_RIGHT, BORDER_UP,    COLOR_BLUE},
    {BORDER_LEFT,   BORDER_UP,    BORDER_LEFT,  BORDER_DOWN,  COLOR_RED},
    {BORDER_LEFT,   BORDER_DOWN,  BORDER_RIGHT, BORDER_DOWN,  COLOR_ORANGE},
    {BORDER_RIGHT,  BORDER_UP,    BORDER_RIGHT, BORDER_DOWN,  COLOR_GREEN}
};

game_map gmap =
{
  lines, 4
};

void setup() {
  Serial.begin(9600);

  scr = new screen();
  in = new input();
  game = new NNZXM(*scr, *in, player, NPC, gmap);
}

void loop()
{
  while(true)
  {
    game->init();
    game->loop();
    game->finish();
  }
}
